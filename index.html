<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Zikr Game ‚Äî ÿ∞ŸÉÿ±</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --gold: #C9A84C;
    --gold-light: #F0D07A;
    --gold-dim: #8A6A2A;
    --deep: #0A0E1A;
    --mid: #111827;
    --surface: #1A2235;
    --text: #EDE0C4;
    --glow: rgba(201,168,76,0.35);
  }

  body {
    background: var(--deep);
    color: var(--text);
    font-family: 'Amiri', serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow: hidden;
    position: relative;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }

  /* Starfield */
  .stars {
    position: fixed; inset: 0; z-index: 0;
    background:
      radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.6) 0%, transparent 100%),
      radial-gradient(1px 1px at 80% 10%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1px 1px at 50% 80%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 10% 60%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 50%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 35% 15%, rgba(255,255,255,0.6) 0%, transparent 100%),
      radial-gradient(1px 1px at 65% 45%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 75% 75%, rgba(255,255,220,0.7) 0%, transparent 100%),
      radial-gradient(1px 1px at 5% 90%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 45% 55%, rgba(255,255,200,0.6) 0%, transparent 100%);
  }

  /* Geometric Islamic pattern overlay */
  .pattern-overlay {
    position: fixed; inset: 0; z-index: 0; opacity: 0.04;
    background-image: 
      repeating-linear-gradient(60deg, var(--gold) 0, var(--gold) 1px, transparent 0, transparent 50%),
      repeating-linear-gradient(-60deg, var(--gold) 0, var(--gold) 1px, transparent 0, transparent 50%),
      repeating-linear-gradient(0deg, var(--gold) 0, var(--gold) 1px, transparent 0, transparent 50%);
    background-size: 60px 60px;
  }

  .container {
    position: relative; z-index: 1;
    display: flex; flex-direction: column; align-items: center;
    width: 100%; max-width: 480px;
    padding: 20px 16px;
    min-height: 100vh;
  }

  /* Header */
  .header {
    text-align: center;
    margin-bottom: 10px;
    animation: fadeDown 0.8s ease;
  }

  .header h1 {
    font-family: 'Cinzel Decorative', cursive;
    font-size: clamp(1.1rem, 4vw, 1.5rem);
    color: var(--gold-light);
    letter-spacing: 0.1em;
    text-shadow: 0 0 20px var(--glow);
  }

  .header .arabic-title {
    font-family: 'Amiri', serif;
    font-size: 2rem;
    color: var(--gold);
    display: block;
    margin-top: 2px;
    text-shadow: 0 0 15px var(--glow);
  }

  /* Zikr selector */
  .zikr-tabs {
    display: flex; flex-wrap: wrap; gap: 8px;
    justify-content: center;
    margin-bottom: 14px;
    animation: fadeUp 0.8s ease 0.2s both;
  }

  .zikr-tab {
    background: var(--surface);
    border: 1px solid var(--gold-dim);
    color: var(--text);
    padding: 6px 14px;
    border-radius: 50px;
    cursor: pointer;
    font-family: 'Amiri', serif;
    font-size: 0.85rem;
    transition: all 0.2s;
    text-align: center;
  }
  .zikr-tab:hover, .zikr-tab.active {
    background: var(--gold-dim);
    border-color: var(--gold);
    color: var(--gold-light);
    box-shadow: 0 0 12px var(--glow);
  }

  /* Zikr display */
  .zikr-display {
    text-align: center;
    margin-bottom: 10px;
    animation: fadeUp 0.8s ease 0.3s both;
    min-height: 70px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
  }

  .zikr-arabic {
    font-family: 'Amiri', serif;
    font-size: clamp(1.4rem, 6vw, 2.2rem);
    color: var(--gold-light);
    text-shadow: 0 0 20px var(--glow);
    line-height: 1.4;
    direction: rtl;
  }

  .zikr-translation {
    font-size: 0.8rem;
    color: rgba(237,224,196,0.55);
    margin-top: 4px;
    letter-spacing: 0.04em;
    font-style: italic;
  }

  /* Target setter */
  .target-row {
    display: flex; align-items: center; gap: 10px;
    margin-bottom: 48px;
    animation: fadeUp 0.8s ease 0.35s both;
  }

  .target-label {
    font-size: 0.8rem;
    color: var(--gold-dim);
    letter-spacing: 0.05em;
  }

  .target-btns { display: flex; gap: 6px; }
  .target-btn {
    background: var(--surface);
    border: 1px solid var(--gold-dim);
    color: var(--text);
    width: 36px; height: 28px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.75rem;
    font-family: 'Amiri', serif;
    transition: all 0.15s;
  }
  .target-btn:hover, .target-btn.active-target {
    background: var(--gold-dim);
    border-color: var(--gold);
    color: var(--gold-light);
  }

  /* Main tap orb */
  .orb-wrapper {
    position: relative;
    width: 290px;
    height: 290px;
    display: flex; align-items: center; justify-content: center;
    margin-top: 16px;
    margin-bottom: 20px;
    animation: fadeUp 0.8s ease 0.4s both;
    overflow: hidden;
  }

  .orb-ring {
    position: absolute;
    border-radius: 50%;
    border: 1px solid var(--gold);
    opacity: 0;
    animation: ring-pulse 2.5s ease-out infinite;
    pointer-events: none;
  }
  .orb-ring:nth-child(1) { width: 200px; height: 200px; animation-delay: 0s; }
  .orb-ring:nth-child(2) { width: 240px; height: 240px; animation-delay: 0.8s; }
  .orb-ring:nth-child(3) { width: 280px; height: 280px; animation-delay: 1.6s; }

  @keyframes ring-pulse {
    0% { transform: scale(0.85); opacity: 0.5; }
    100% { transform: scale(1.1); opacity: 0; }
  }

  .orb {
    width: 180px; height: 180px;
    border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, var(--gold-dim), #0d1220 70%);
    border: 2px solid var(--gold);
    box-shadow: 0 0 30px var(--glow), inset 0 0 30px rgba(0,0,0,0.5);
    cursor: pointer;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    position: relative; z-index: 2;
    transition: transform 0.1s, box-shadow 0.1s;
    -webkit-tap-highlight-color: transparent;
  }

  .orb:active, .orb.tapped {
    transform: scale(0.93);
    box-shadow: 0 0 50px rgba(201,168,76,0.7), inset 0 0 40px rgba(201,168,76,0.15);
  }

  .orb-count {
    font-family: 'Cinzel Decorative', cursive;
    font-size: 3rem;
    color: var(--gold-light);
    line-height: 1;
    text-shadow: 0 0 20px var(--glow);
  }

  .orb-label {
    font-size: 0.7rem;
    color: rgba(237,224,196,0.5);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-top: 4px;
  }

  /* Progress arc */
  .progress-svg {
    position: absolute;
    width: 200px; height: 200px;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) rotate(-90deg);
    z-index: 3; pointer-events: none;
  }

  .progress-track { fill: none; stroke: rgba(201,168,76,0.12); stroke-width: 3; }
  .progress-fill {
    fill: none; stroke: var(--gold); stroke-width: 3;
    stroke-linecap: round;
    stroke-dasharray: 565;
    stroke-dashoffset: 565;
    transition: stroke-dashoffset 0.3s ease;
    filter: drop-shadow(0 0 4px var(--gold));
  }

  /* Stats row */
  .stats-row {
    display: flex; gap: 20px;
    margin-bottom: 16px;
    animation: fadeUp 0.8s ease 0.5s both;
  }

  .stat-box {
    background: var(--surface);
    border: 1px solid var(--gold-dim);
    border-radius: 12px;
    padding: 10px 20px;
    text-align: center;
    min-width: 90px;
  }

  .stat-value {
    font-family: 'Cinzel Decorative', cursive;
    font-size: 1.3rem;
    color: var(--gold-light);
  }

  .stat-label {
    font-size: 0.65rem;
    color: rgba(237,224,196,0.4);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-top: 2px;
  }

  /* Milestone message */
  .milestone {
    font-family: 'Amiri', serif;
    font-size: 1rem;
    color: var(--gold);
    text-align: center;
    min-height: 24px;
    text-shadow: 0 0 10px var(--glow);
    animation: fadeUp 0.8s ease 0.55s both;
    transition: opacity 0.3s;
  }

  /* Controls */
  .controls {
    display: flex; gap: 10px;
    animation: fadeUp 0.8s ease 0.6s both;
    margin-top: 4px;
  }

  .ctrl-btn {
    background: var(--surface);
    border: 1px solid var(--gold-dim);
    color: var(--text);
    padding: 8px 22px;
    border-radius: 50px;
    cursor: pointer;
    font-family: 'Amiri', serif;
    font-size: 0.85rem;
    letter-spacing: 0.04em;
    transition: all 0.2s;
  }
  .ctrl-btn:hover {
    background: var(--gold-dim);
    border-color: var(--gold);
    color: var(--gold-light);
    box-shadow: 0 0 12px var(--glow);
  }
  .ctrl-btn.danger:hover {
    background: rgba(120,30,30,0.6);
    border-color: #c0392b;
    color: #ff6b6b;
  }

  /* Floating particles on tap */
  .particle {
    position: fixed;
    pointer-events: none;
    font-family: 'Amiri', serif;
    font-size: 1rem;
    color: var(--gold);
    z-index: 100;
    animation: float-up 1s ease forwards;
  }

  @keyframes float-up {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-80px) scale(0.6); }
  }

  /* Complete overlay */
  .complete-overlay {
    position: fixed; inset: 0; z-index: 200;
    background: rgba(10,14,26,0.95);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 16px;
    opacity: 0; pointer-events: none;
    transition: opacity 0.5s;
  }
  .complete-overlay.show { opacity: 1; pointer-events: all; }

  .complete-star { font-size: 4rem; animation: spin-glow 2s ease-in-out infinite alternate; }
  @keyframes spin-glow {
    0% { text-shadow: 0 0 20px var(--gold); transform: scale(1); }
    100% { text-shadow: 0 0 50px var(--gold-light); transform: scale(1.1); }
  }

  .complete-title {
    font-family: 'Cinzel Decorative', cursive;
    font-size: 1.5rem;
    color: var(--gold-light);
    text-shadow: 0 0 20px var(--glow);
  }

  .complete-arabic {
    font-family: 'Amiri', serif;
    font-size: 2rem;
    color: var(--gold);
    direction: rtl;
  }

  .complete-sub {
    color: rgba(237,224,196,0.5);
    font-size: 0.9rem;
    text-align: center;
  }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Vibrate feedback */
  @keyframes vibrate {
    0%,100% { transform: translateX(0); }
    25% { transform: translateX(-3px); }
    75% { transform: translateX(3px); }
  }
</style>
</head>
<body>

<div class="stars"></div>
<div class="pattern-overlay"></div>

<div class="container">
  <div class="header">
    <h1>ZIKR GAME</h1>
    <span class="arabic-title">ÿ∞ŸêŸÉŸíÿ±</span>
  </div>

  <!-- Zikr selector -->
  <div class="zikr-tabs" id="zikrTabs"></div>

  <!-- Current zikr display -->
  <div class="zikr-display">
    <div class="zikr-arabic" id="zikrArabic"></div>
    <div class="zikr-translation" id="zikrTranslation"></div>
  </div>

  <!-- Target row -->
  <div class="target-row">
    <span class="target-label">TARGET:</span>
    <div class="target-btns">
      <button class="target-btn active-target" data-t="33" onclick="setTarget(33, this)">33</button>
      <button class="target-btn" data-t="100" onclick="setTarget(100, this)">100</button>
      <button class="target-btn" data-t="99" onclick="setTarget(99, this)">99</button>
      <button class="target-btn" data-t="1000" onclick="setTarget(1000, this)">‚àû</button>
    </div>
  </div>

  <!-- Tap orb -->
  <div class="orb-wrapper">
    <div class="orb-ring"></div>
    <div class="orb-ring"></div>
    <div class="orb-ring"></div>
    <svg class="progress-svg" viewBox="0 0 200 200">
      <circle class="progress-track" cx="100" cy="100" r="90"/>
      <circle class="progress-fill" id="progressArc" cx="100" cy="100" r="90"/>
    </svg>
    <div class="orb" id="orbBtn" onclick="handleTap(event)">
      <div class="orb-count" id="countDisplay">0</div>
      <div class="orb-label">TAP</div>
    </div>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-box">
      <div class="stat-value" id="totalDisplay">0</div>
      <div class="stat-label">Total</div>
    </div>
    <div class="stat-box">
      <div class="stat-value" id="roundDisplay">1</div>
      <div class="stat-label">Round</div>
    </div>
    <div class="stat-box">
      <div class="stat-value" id="targetDisplay">33</div>
      <div class="stat-label">Target</div>
    </div>
  </div>

  <!-- Milestone -->
  <div class="milestone" id="milestone"></div>

  <!-- Controls -->
  <div class="controls">
    <button class="ctrl-btn" onclick="nextZikr()">Next Zikr ‚Ä∫</button>
    <button class="ctrl-btn danger" onclick="resetAll()">Reset</button>
  </div>
</div>

<!-- Completion overlay -->
<div class="complete-overlay" id="completeOverlay">
  <div class="complete-star">‚ú¶</div>
  <div class="complete-title">MashaAllah!</div>
  <div class="complete-arabic" id="completeMsgArabic">ŸÖÿß ÿ¥ÿßÿ° ÿßŸÑŸÑŸá</div>
  <div class="complete-sub" id="completeMsgSub">You completed <strong id="completeRound"></strong> rounds!</div>
  <button class="ctrl-btn" onclick="continueZikr()" style="margin-top:10px;">Continue ‚Ä∫</button>
</div>

<script>
const ZIKRS = [
  {
    tab: 'Astaghfirullah',
    arabic: 'ÿ£Ÿéÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±Ÿè ÿßŸÑŸÑŸëŸ∞Ÿá',
    bengali: '‡¶Ü‡¶∏‡ßç‡¶§‡¶æ‡¶ó‡¶´‡¶ø‡¶∞‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π',
    translation: 'I seek forgiveness from Allah',
    particle: 'ü§≤'
  },
  {
    tab: 'Salawat',
    arabic: 'ÿµŸéŸÑŸéŸëŸâ ÿßŸÑŸÑŸëŸ∞ŸáŸè ÿπŸéŸÑŸéŸäŸíŸáŸê ŸàŸéÿ≥ŸéŸÑŸéŸëŸÖŸé',
    bengali: '‡¶∏‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶π‡¶ø ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∏‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶Æ',
    translation: 'Peace and blessings be upon him (Prophet Ô∑∫)',
    particle: '‚ò™'
  },
  {
    tab: 'Allahu Akbar',
    arabic: 'ÿßŸÑŸÑŸëŸ∞ŸáŸè ÿ£ŸéŸÉŸíÿ®Ÿéÿ±',
    bengali: '‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡ßÅ ‡¶Ü‡¶ï‡¶¨‡¶æ‡¶∞',
    translation: 'Allah is the Greatest',
    particle: '‚òÖ'
  },
  {
    tab: 'La Ilaha',
    arabic: 'ŸÑŸéÿß ÿ•ŸêŸÑŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸëŸ∞Ÿá',
    bengali: '‡¶≤‡¶æ ‡¶á‡¶≤‡¶æ‡¶π‡¶æ ‡¶á‡¶≤‡ßç‡¶≤‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡ßÅ',
    translation: 'There is no god but Allah',
    particle: '‚ú¶'
  },
  {
    tab: 'SubhanAllah',
    arabic: 'ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸëŸ∞Ÿá',
    bengali: '‡¶∏‡ßÅ‡¶¨‡¶π‡¶æ‡¶®‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶π',
    translation: 'Glory be to Allah',
    particle: '‚ùã'
  },
  {
    tab: 'Alhamdulillah',
    arabic: 'ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸëŸ∞Ÿá',
    bengali: '‡¶Ü‡¶≤‡¶π‡¶æ‡¶Æ‡¶¶‡ßÅ‡¶≤‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π',
    translation: 'All praise is for Allah',
    particle: '‚úø'
  }
];

const MILESTONES = [
  { n: 10, msg: 'Keep going! ‚ú®' },
  { n: 33, msg: 'MashaAllah! 33 ÿ∞ŸÉÿ±' },
  { n: 50, msg: 'Halfway there! üåô' },
  { n: 99, msg: 'SubhanAllah! 99 ÿ∞ŸÉÿ±' },
  { n: 100, msg: 'ÿßŸÑÿ≠ŸÖÿØ ŸÑŸÑŸá ‚Äî 100!' },
];

let currentZikr = 0;
let count = 0;
let total = 0;
let round = 1;
let target = 33;
const circumference = 2 * Math.PI * 90;

// Build tabs
const tabContainer = document.getElementById('zikrTabs');
ZIKRS.forEach((z, i) => {
  const btn = document.createElement('button');
  btn.className = 'zikr-tab' + (i === 0 ? ' active' : '');
  btn.textContent = z.tab;
  btn.onclick = () => selectZikr(i);
  tabContainer.appendChild(btn);
});

function selectZikr(i) {
  currentZikr = i;
  document.querySelectorAll('.zikr-tab').forEach((b, idx) => b.classList.toggle('active', idx === i));
  document.getElementById('zikrArabic').textContent = ZIKRS[i].arabic;
  document.getElementById('zikrTranslation').textContent = ZIKRS[i].bengali + ' ‚Äî ' + ZIKRS[i].translation;
  updateProgress();
}

function setTarget(t, btn) {
  target = t;
  document.querySelectorAll('.target-btn').forEach(b => b.classList.remove('active-target'));
  btn.classList.add('active-target');
  document.getElementById('targetDisplay').textContent = t === 1000 ? '‚àû' : t;
  updateProgress();
}

function handleTap(e) {
  count++;
  total++;
  updateDisplay();
  orbPulse();
  spawnParticle(e.clientX || window.innerWidth/2, e.clientY || window.innerHeight/2);
  checkMilestone();
  if (target < 1000 && count >= target) {
    setTimeout(showComplete, 400);
  }
}

function updateDisplay() {
  document.getElementById('countDisplay').textContent = count;
  document.getElementById('totalDisplay').textContent = total;
  document.getElementById('roundDisplay').textContent = round;
  updateProgress();
}

function updateProgress() {
  const arc = document.getElementById('progressArc');
  const pct = target < 1000 ? Math.min(count / target, 1) : (count % 33) / 33;
  const offset = circumference * (1 - pct);
  arc.style.strokeDasharray = circumference;
  arc.style.strokeDashoffset = offset;
}

function orbPulse() {
  const orb = document.getElementById('orbBtn');
  orb.classList.add('tapped');
  setTimeout(() => orb.classList.remove('tapped'), 100);
}

function spawnParticle(x, y) {
  const p = document.createElement('div');
  p.className = 'particle';
  const symbols = [ZIKRS[currentZikr].particle, '+1', '‚ú¶', '‚òÖ'];
  p.textContent = symbols[Math.floor(Math.random() * symbols.length)];
  p.style.left = (x - 20 + Math.random() * 40 - 20) + 'px';
  p.style.top = (y - 20) + 'px';
  document.body.appendChild(p);
  setTimeout(() => p.remove(), 1000);
}

function checkMilestone() {
  const ms = MILESTONES.find(m => m.n === count);
  const el = document.getElementById('milestone');
  if (ms) {
    el.textContent = ms.msg;
    setTimeout(() => el.textContent = '', 2500);
  }
}

function nextZikr() {
  selectZikr((currentZikr + 1) % ZIKRS.length);
}

function showComplete() {
  document.getElementById('completeRound').textContent = round;
  document.getElementById('completeOverlay').classList.add('show');
  // vibrate
  if (navigator.vibrate) navigator.vibrate([100, 50, 100, 50, 200]);
}

function continueZikr() {
  document.getElementById('completeOverlay').classList.remove('show');
  count = 0;
  round++;
  document.getElementById('milestone').textContent = '‚ú¶ Round ' + round + ' ‚Äî ÿ®ÿßÿ±ŸÉ ÿßŸÑŸÑŸá ŸÅŸäŸÉ';
  setTimeout(() => document.getElementById('milestone').textContent = '', 2500);
  updateDisplay();
}

function resetAll() {
  count = 0; total = 0; round = 1;
  document.getElementById('milestone').textContent = '';
  document.getElementById('completeOverlay').classList.remove('show');
  updateDisplay();
}

// Touch support ‚Äî prevent scroll bounce
document.getElementById('orbBtn').addEventListener('touchstart', function(e) {
  e.preventDefault();
  handleTap(e.touches[0]);
}, { passive: false });

// Init
selectZikr(0);
document.getElementById('targetDisplay').textContent = '33';
</script>
</body>
</html>
